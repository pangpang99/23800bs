<!DOCTYPE HTML>
<html>

<head>
    <title>取消与利用冒泡</title>
    <meta charset="utf-8" />
</head>

<body>
    <div id="keys">
        <button>1</button>
        <button>2</button>
        <button>3</button>
        <button>4</button>
        <button>5</button><br>
        <button>C</button>
        <button>+</button>
        <button>-</button>
        <button>=</button>
    </div>
    <textarea id="sc" style="resize:none;width:200px; height:50px;" readonly></textarea>
    <script>
        //1.事件仅绑定在父元素一份
        keys.onclick = function (e) {
            //this->父元素div
            //e.target->目标元素
            //2.用e.target代替this获得目标元素
            //3.目标元素必须经过鉴别符合条件,才能执行后续操作
            //只有点的元素的标签名是BUTTON时
            if (e.target.nodeName == "BUTTON") {
                // alert(`${e.target.innerHTML}痛`)
                //接下来,计算器的正常流程
                //判断e.target的内容
                //如果是C
                switch (e.target.innerHTML) {
                    // alert(`${e.target.innerHTML}痛`)
                    case "C":
                        //就清除显示屏sc的内容
                        sc.innerHTML = "";
                        break;
                       //如果是=
                        case "=":
                        //如果显示屏sc的内容不为空
                        if (sc.innerHTML !== "") {
                            try {//才尝试
                                //将显示屏sc的内容放入全局函数eval()中计算得到计算结果
                                sc.innerHTML = eval(sc.innerHTML);
                            }//再将结果放回显示屏sc中
                            catch (err) {	//一旦发生错误,就捕获错误
                                //并将错误信息显示到显示屏sc中
                                sc.innerHTML = String(err);
                            }
                        }
                        break;
                    //其余按钮
                    default:
                        //将e.target的内容追加到显示屏sc的内容末尾
                        sc.innerHTML += e.target.innerHTML;
                }
            }
        }
    </script>
</body>

</html>